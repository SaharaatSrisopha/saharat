{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useLocation,useNavigate}from\"react-router-dom\";import axios from\"axios\";import{BASE_API_URL,APP_NAME}from\"./globals\";import\"./MemberSearch.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const MemberSearch=()=>{const location=useLocation();const navigate=useNavigate();const[name,setName]=useState(\"\");const[results,setResults]=useState([]);const{user}=location.state||{};const handleSearch=async e=>{e.preventDefault();try{const response=await axios.post(BASE_API_URL+\"/members/search\",{name_mem:name});setResults(response.data);}catch(error){alert(\"Search failed\");}};const handleSearchReload=async()=>{try{const response=await axios.post(BASE_API_URL+\"/members/search\",{name_mem:name});setResults(response.data);}catch(error){alert(\"Search failed\");}};useEffect(()=>{handleSearchReload();// Trigger search when the component mounts\n},[]);const handleEdit=id_mem=>{navigate(\"/edit\",{state:{id_mem:id_mem}});};const handleAdd=()=>{navigate(\"/insert\");};return/*#__PURE__*/_jsxs(\"div\",{className:\"container\",children:[/*#__PURE__*/_jsx(\"h2\",{children:APP_NAME}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Welcome, \",(user===null||user===void 0?void 0:user.name_mem)||\"User\",\"!\"]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSearch,children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Enter name\",value:name,onChange:e=>setName(e.target.value)}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Search\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:handleAdd,children:\"Add\"}),/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"ID \\u0E1C\\u0E39\\u0E49\\u0E43\\u0E0A\\u0E49\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0E0A\\u0E37\\u0E48\\u0E2D-\\u0E19\\u0E32\\u0E21\\u0E2A\\u0E01\\u0E38\\u0E25\"}),/*#__PURE__*/_jsx(\"th\",{children:\"\\u0E40\\u0E1A\\u0E2D\\u0E23\\u0E4C\\u0E42\\u0E17\\u0E23\"}),/*#__PURE__*/_jsx(\"th\",{children:\"E-mail\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Action\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:results.map(member=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:member.id_mem}),/*#__PURE__*/_jsx(\"td\",{children:member.name_mem}),/*#__PURE__*/_jsx(\"td\",{children:member.phone_mem}),/*#__PURE__*/_jsx(\"td\",{children:member.email_mem}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"action-button\",onClick:()=>handleEdit(member.id_mem),children:\"Edit\"})})]},member.id_mem))})]})]});};export default MemberSearch;","map":{"version":3,"names":["React","useState","useEffect","useLocation","useNavigate","axios","BASE_API_URL","APP_NAME","jsx","_jsx","jsxs","_jsxs","MemberSearch","location","navigate","name","setName","results","setResults","user","state","handleSearch","e","preventDefault","response","post","name_mem","data","error","alert","handleSearchReload","handleEdit","id_mem","handleAdd","className","children","onSubmit","type","placeholder","value","onChange","target","onClick","map","member","phone_mem","email_mem"],"sources":["C:/fixky/web server/mem/test-web/src/components/MemberSearch.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useLocation, useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport { BASE_API_URL, APP_NAME } from \"./globals\";\r\nimport \"./MemberSearch.css\";\r\n\r\nconst MemberSearch = () => {\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const [name, setName] = useState(\"\");\r\n  const [results, setResults] = useState([]);\r\n  const { user } = location.state || {};\r\n\r\n  const handleSearch = async (e) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await axios.post(BASE_API_URL + \"/members/search\", {\r\n        name_mem: name,\r\n      });\r\n      setResults(response.data);\r\n    } catch (error) {\r\n      alert(\"Search failed\");\r\n    }\r\n  };\r\n\r\n  const handleSearchReload = async () => {\r\n    try {\r\n      const response = await axios.post(BASE_API_URL + \"/members/search\", {\r\n        name_mem: name,\r\n      });\r\n      setResults(response.data);\r\n    } catch (error) {\r\n      alert(\"Search failed\");\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    handleSearchReload(); // Trigger search when the component mounts\r\n  }, []);\r\n\r\n  const handleEdit = (id_mem) => {\r\n    navigate(\"/edit\", {\r\n      state: { id_mem: id_mem },\r\n    });\r\n  };\r\n\r\n  const handleAdd = () => {\r\n    navigate(\"/insert\");\r\n  };\r\n\r\n  return (\r\n    <div className=\"container\">\r\n      <h2>{APP_NAME}</h2>\r\n      <p>Welcome, {user?.name_mem || \"User\"}!</p>\r\n      <form onSubmit={handleSearch}>\r\n        <input\r\n          type=\"text\"\r\n          placeholder=\"Enter name\"\r\n          value={name}\r\n          onChange={(e) => setName(e.target.value)}\r\n        />\r\n        <button type=\"submit\">Search</button>\r\n      </form>\r\n      <button onClick={handleAdd}>Add</button>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>ID ผู้ใช้</th>\r\n            <th>ชื่อ-นามสกุล</th>\r\n            <th>เบอร์โทร</th>\r\n            <th>E-mail</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {results.map((member) => (\r\n            <tr key={member.id_mem}>\r\n              <td>{member.id_mem}</td>\r\n              <td>{member.name_mem}</td>\r\n              <td>{member.phone_mem}</td>\r\n              <td>{member.email_mem}</td>\r\n              <td>\r\n                <button\r\n                  className=\"action-button\"\r\n                  onClick={() => handleEdit(member.id_mem)}\r\n                >\r\n                  Edit\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MemberSearch;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}